/*! For license information please see app.f99ce2.js.LICENSE.txt */
"use strict";(self.webpackChunklaravue=self.webpackChunklaravue||[]).push([[9959],{95195:function(e,t,n){n.d(t,{Z:function(){return o}});var r=n(51513);function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.uri=t}var t,n,o;return t=e,(n=[{key:"list",value:function(e){return(0,r.Z)({url:"/"+this.uri,method:"get",params:e})}},{key:"get",value:function(e){return(0,r.Z)({url:"/"+this.uri+"/"+e,method:"get"})}},{key:"store",value:function(e){return(0,r.Z)({url:"/"+this.uri,method:"post",data:e})}},{key:"update",value:function(e,t){return(0,r.Z)({url:"/"+this.uri+"/"+e,method:"put",data:t})}},{key:"destroy",value:function(e){return(0,r.Z)({url:"/"+this.uri+"/"+e,method:"delete"})}}])&&i(t.prototype,n),o&&i(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}()},46361:function(e,t,n){n.d(t,{Z:function(){return l}});var r=n(51513);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},s(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var i=u(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c(this,n)}}function c(e,t){if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}var l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}(u,e);var t,n,i,c=a(u);function u(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),c.call(this,"roles")}return t=u,(n=[{key:"permissions",value:function(e){return(0,r.Z)({url:"/"+this.uri+"/"+e+"/permissions",method:"get"})}}])&&o(t.prototype,n),i&&o(t,i),Object.defineProperty(t,"prototype",{writable:!1}),u}(n(95195).Z)},67376:function(e,t,n){n.d(t,{Z:function(){return s}});var r=n(43202),i={inserted:function(e,t,n){var i=t.value,o=r.Z.getters&&r.Z.getters.permissions;if(!(i&&i instanceof Array&&i.length>0))throw new Error("Permissions are required! Example: v-permission=\"['manage user','manage permission']\"");var s=i,a=o.some((function(e){return s.includes(e)}));a||e.parentNode&&e.parentNode.removeChild(e)}},o=function(e){e.directive("permission",i)};window.Vue&&(window.permission=i,Vue.use(o)),i.install=o;var s=i},61363:function(e,t,n){n.d(t,{Z:function(){return f}});var r=n(93379),i=n.n(r),o=n(54083),s={insert:"head",singleton:!1},a=(i()(o.Z,s),o.Z.locals,"@@wavesContext");function c(e,t){function n(n){var r=Object.assign({},t.value),i=Object.assign({ele:e,type:"hit",color:"rgba(0, 0, 0, 0.15)"},r),o=i.ele;if(o){o.style.position="relative",o.style.overflow="hidden";var s=o.getBoundingClientRect(),a=o.querySelector(".waves-ripple");if(a?a.className="waves-ripple":((a=document.createElement("span")).className="waves-ripple",a.style.height=a.style.width=Math.max(s.width,s.height)+"px",o.appendChild(a)),"center"===i.type)a.style.top=s.height/2-a.offsetHeight/2+"px",a.style.left=s.width/2-a.offsetWidth/2+"px";else a.style.top=(n.pageY-s.top-a.offsetHeight/2-document.documentElement.scrollTop||document.body.scrollTop)+"px",a.style.left=(n.pageX-s.left-a.offsetWidth/2-document.documentElement.scrollLeft||document.body.scrollLeft)+"px";return a.style.backgroundColor=i.color,a.className="waves-ripple z-active",!1}}return e[a]?e[a].removeHandle=n:e[a]={removeHandle:n},n}var u={bind:function(e,t){e.addEventListener("click",c(e,t),!1)},update:function(e,t){e.removeEventListener("click",e[a].removeHandle,!0),e.addEventListener("click",c(e,t),!1)},unbind:function(e){e.removeEventListener("click",e[a].removeHandle,!1),e[a]=null,delete e[a]}},l=function(e){e.directive("waves",u)};window.Vue&&(window.waves=u,Vue.use(l)),u.install=l;var f=u},59667:function(e,t,n){n.d(t,{Z:function(){return i}});var r=n(43202);function i(e){if(e&&e instanceof Array&&e.length>0){var t=r.Z.getters&&r.Z.getters.permissions,n=e;return t.some((function(e){return n.includes(e)}))}return console.error("Need permissions! Like v-permission=\"['manage permission','edit article']\""),!1}},72724:function(e,t,n){var r=n(1519),i=n.n(r)()((function(e){return e[1]}));i.push([e.id,".permissions-container[data-v-4366fb55]{-webkit-box-flex:1;-webkit-box-pack:justify;-ms-flex-pack:justify;-ms-flex:1;flex:1;font-size:14px;justify-content:space-between;padding-right:8px}.permissions-container .block[data-v-4366fb55]{float:left;min-width:250px}.permissions-container .clear-left[data-v-4366fb55]{clear:left}",""]),t.Z=i},54083:function(e,t,n){var r=n(1519),i=n.n(r)()((function(e){return e[1]}));i.push([e.id,".waves-ripple{background-clip:padding-box;background-color:rgba(0,0,0,.15);border-radius:100%;opacity:1;pointer-events:none;position:absolute;-webkit-transform:scale(0);transform:scale(0);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.waves-ripple.z-active{opacity:0;-webkit-transform:scale(2);transform:scale(2);-webkit-transition:opacity 1.2s ease-out,-webkit-transform .6s ease-out;transition:opacity 1.2s ease-out,-webkit-transform .6s ease-out;transition:opacity 1.2s ease-out,transform .6s ease-out;transition:opacity 1.2s ease-out,transform .6s ease-out,-webkit-transform .6s ease-out}",""]),t.Z=i},99959:function(e,t,n){n.r(t),n.d(t,{default:function(){return w}});var r=n(95195),i=n(46361),o=n(61363),s=n(67376),a=n(59667);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function u(){u=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",s=r.toStringTag||"@@toStringTag";function a(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{a({},"")}catch(e){a=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var i=t&&t.prototype instanceof d?t:d,o=Object.create(i.prototype),s=new E(r||[]);return o._invoke=function(e,t,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return O()}for(n.method=i,n.arg=o;;){var s=n.delegate;if(s){var a=x(s,n);if(a){if(a===p)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=f(e,t,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===p)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}(e,n,s),o}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var p={};function d(){}function h(){}function m(){}var v={};a(v,i,(function(){return this}));var y=Object.getPrototypeOf,g=y&&y(y(L([])));g&&g!==t&&n.call(g,i)&&(v=g);var b=m.prototype=d.prototype=Object.create(v);function w(e){["next","throw","return"].forEach((function(t){a(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function r(i,o,s,a){var u=f(e[i],e,o);if("throw"!==u.type){var l=u.arg,p=l.value;return p&&"object"==c(p)&&n.call(p,"__await")?t.resolve(p.__await).then((function(e){r("next",e,s,a)}),(function(e){r("throw",e,s,a)})):t.resolve(p).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,a)}))}a(u.arg)}var i;this._invoke=function(e,n){function o(){return new t((function(t,i){r(e,n,t,i)}))}return i=i?i.then(o,o):o()}}function x(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,x(e,t),"throw"===t.method))return p;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var r=f(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,p;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function _(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function L(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:O}}function O(){return{value:void 0,done:!0}}return h.prototype=m,a(b,"constructor",m),a(m,"constructor",h),h.displayName=a(m,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,a(e,s,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},w(k.prototype),a(k.prototype,o,(function(){return this})),e.AsyncIterator=k,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var s=new k(l(t,n,r,i),o);return e.isGeneratorFunction(n)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},w(b),a(b,s,"Generator"),a(b,i,(function(){return this})),a(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=L,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return s.type="throw",s.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],s=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var a=n.call(o,"catchLoc"),c=n.call(o,"finallyLoc");if(a&&c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=e,s.arg=t,o?(this.method="next",this.next=o.finallyLoc,p):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),_(n),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;_(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:L(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),p}},e}function l(e,t,n,r,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void n(e)}a.done?t(c):Promise.resolve(c).then(r,i)}function f(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function s(e){l(o,r,i,s,a,"next",e)}function a(e){l(o,r,i,s,a,"throw",e)}s(void 0)}))}}var p=new i.Z,d=new r.Z("permissions"),h={name:"RoleList",directives:{waves:o.Z,permission:s.Z},data:function(){return{currentRoleId:1,list:[],loading:!0,dialogLoading:!1,dialogVisible:!1,permissions:[],menuPermissions:[],otherPermissions:[],permissionProps:{children:"children",label:"name",disabled:"disabled"}}},computed:{currentRole:function(){var e=this,t=this.list.find((function(t){return t.id===e.currentRoleId}));return void 0===t?{name:"",permissions:[]}:t},rolePermissions:function(){return this.classifyPermissions(this.currentRole.permissions).all},roleMenuPermissions:function(){return this.classifyPermissions(this.currentRole.permissions).menu},roleOtherPermissions:function(){return this.classifyPermissions(this.currentRole.permissions).other}},created:function(){this.getRoles(),this.getPermissions()},methods:{checkPermission:a.Z,getRoles:function(){var e=this;return f(u().mark((function t(){var n,r;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,p.list({});case 3:n=t.sent,r=n.data,e.list=r,e.list.forEach((function(t,n){t.index=n+1,t.description=e.$t("roles.description."+t.name)})),e.loading=!1;case 8:case"end":return t.stop()}}),t)})))()},getPermissions:function(){var e=this;return f(u().mark((function t(){var n,r,i,o,s,a;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.list({});case 2:n=t.sent,r=n.data,i=e.classifyPermissions(r),o=i.all,s=i.menu,a=i.other,e.permissions=o,e.menuPermissions=s,e.otherPermissions=a;case 8:case"end":return t.stop()}}),t)})))()},classifyPermissions:function(e){var t=this,n=[],r=[],i=[];return e.forEach((function(e){var o=e.name;n.push(e),o.startsWith("view menu")?r.push(t.normalizeMenuPermission(e)):i.push(t.normalizePermission(e))})),{all:n,menu:r,other:i}},normalizeMenuPermission:function(e){return{id:e.id,name:this.$options.filters.uppercaseFirst(e.name.substring(10))}},normalizePermission:function(e){return{id:e.id,name:this.$options.filters.uppercaseFirst(e.name),disabled:"manage permission"===e.name}},permissionKeys:function(e){return e.map((function(e){return e.id}))},handleEditPermissions:function(e){var t=this;this.dialogVisible=!0,this.currentRoleId=e,this.$nextTick((function(){t.$refs.menuPermissions.setCheckedKeys(t.permissionKeys(t.roleMenuPermissions)),t.$refs.otherPermissions.setCheckedKeys(t.permissionKeys(t.roleOtherPermissions))}))},confirmPermission:function(){var e=this,t=this.$refs.menuPermissions.getCheckedKeys(),n=this.$refs.otherPermissions.getCheckedKeys(),r=t.concat(n);this.dialogLoading=!0,p.update(this.currentRole.id,{permissions:r}).then((function(t){e.$message({message:"Permissions has been updated successfully",type:"success",duration:5e3}),e.dialogLoading=!1,e.dialogVisible=!1,e.getRoles()}))}}},m=h,v=n(93379),y=n.n(v),g=n(72724),b={insert:"head",singleton:!1},w=(y()(g.Z,b),g.Z.locals,(0,n(51900).Z)(m,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container"},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.list,border:"",fit:"","highlight-current-row":""}},[n("el-table-column",{attrs:{align:"center",label:"ID",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.row.index))])]}}])}),e._v(" "),n("el-table-column",{attrs:{width:"150",align:"center",label:e.$t("table.name")},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(e._f("uppercaseFirst")(t.row.name)))])]}}])}),e._v(" "),n("el-table-column",{attrs:{align:"left",label:e.$t("table.description")},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.row.description))])]}}])}),e._v(" "),e.checkPermission(["manage permission"])?n("el-table-column",{attrs:{align:"center",label:"Actions",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return["admin"!==t.row.name?n("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["manage permission"],expression:"['manage permission']"}],attrs:{type:"primary",size:"small",icon:"el-icon-edit"},on:{click:function(n){return e.handleEditPermissions(t.row.id)}}},[e._v("\n          "+e._s(e.$t("permission.editPermission"))+"\n        ")]):e._e()]}}],null,!1,1525188536)}):e._e()],1),e._v(" "),n("el-dialog",{attrs:{visible:e.dialogVisible,title:"Edit Permissions - "+e.currentRole.name},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticClass:"form-container"},[n("div",{staticClass:"permissions-container"},[n("div",{staticClass:"block"},[n("el-form",{attrs:{model:e.currentRole,"label-width":"80px","label-position":"top"}},[n("el-form-item",{attrs:{label:"Menus"}},[n("el-tree",{ref:"menuPermissions",staticClass:"permission-tree",attrs:{data:e.menuPermissions,"default-checked-keys":e.permissionKeys(e.roleMenuPermissions),props:e.permissionProps,"show-checkbox":"","node-key":"id"}})],1)],1)],1),e._v(" "),n("div",{staticClass:"block"},[n("el-form",{attrs:{model:e.currentRole,"label-width":"80px","label-position":"top"}},[n("el-form-item",{attrs:{label:"Permissions"}},[n("el-tree",{ref:"otherPermissions",staticClass:"permission-tree",attrs:{data:e.otherPermissions,"default-checked-keys":e.permissionKeys(e.roleOtherPermissions),props:e.permissionProps,"show-checkbox":"","node-key":"id"}})],1)],1)],1),e._v(" "),n("div",{staticClass:"clear-left"})]),e._v(" "),n("div",{staticStyle:{"text-align":"right"}},[n("el-button",{attrs:{type:"danger"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("\n          "+e._s(e.$t("permission.cancel"))+"\n        ")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:e.confirmPermission}},[e._v("\n          "+e._s(e.$t("permission.confirm"))+"\n        ")])],1)])])],1)}),[],!1,null,"4366fb55",null).exports)}}]);